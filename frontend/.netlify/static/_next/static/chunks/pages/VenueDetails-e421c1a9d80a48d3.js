(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[632],{2415:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/VenueDetails",function(){return t(4766)}])},4766:function(e,s,t){"use strict";t.r(s);var a=t(1010),l=t(2253),n=t(4932),r=t(1309),i=t(7582),c=t(5893),d=t(7294),o=t(1163),m=t(1664),h=t.n(m),u=t(7066),x=t(2298),b=t(9198),g=t.n(b),f=t(8120),j=t(2920),v=t(9583),p=t(3495);s.default=function(){var e,s=(0,o.useRouter)(),t=s.query.id,m=(0,f.aC)().isAuthenticated,b=(0,r._)((0,d.useState)(null),2),N=b[0],y=b[1],w=(0,r._)((0,d.useState)(!0),2),D=w[0],_=w[1],k=(0,r._)((0,d.useState)(null),2),S=k[0],A=k[1],C=(0,r._)((0,d.useState)(0),2),E=C[0],M=C[1],P=(0,r._)((0,d.useState)({startDate:new Date,endDate:new Date(new Date().setDate(new Date().getDate()+1))}),2),F=P[0],T=P[1],O=(0,r._)((0,d.useState)(!1),2),I=O[0],V=O[1],$=(0,r._)((0,d.useState)(null),2),J=$[0],R=$[1];(0,d.useEffect)(function(){var e,s=(e=(0,a._)(function(){var e;return(0,i.Jh)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),_(!0),[4,u.Z.get("".concat("https://evento-backend.onrender.com","/venues/").concat(t))];case 1:return(e=s.sent()).data&&e.data.data&&y(e.data.data),_(!1),[3,3];case 2:return console.error("Error fetching venue details:",s.sent()),A("Failed to load venue details. Please try again later."),_(!1),[3,3];case 3:return[2]}})}),function(){return e.apply(this,arguments)});t&&s()},[t]);var B=(e=(0,a._)(function(){var e;return(0,i.Jh)(this,function(s){switch(s.label){case 0:if(!F.startDate||!F.endDate)return j.Am.error("Please select both start and end dates"),[2];s.label=1;case 1:return s.trys.push([1,3,,4]),V(!0),[4,u.Z.get("".concat("https://evento-backend.onrender.com","/venues/").concat(t,"/availability"),{params:{startDate:F.startDate.toISOString(),endDate:F.endDate.toISOString()}})];case 2:return R((e=s.sent()).data.available),V(!1),e.data.available?j.Am.success("Venue is available for the selected dates!"):j.Am.error("Venue is not available for the selected dates. Please try different dates."),[3,4];case 3:return console.error("Error checking availability:",s.sent()),j.Am.error("Failed to check availability. Please try again."),V(!1),[3,4];case 4:return[2]}})}),function(){return e.apply(this,arguments)});if(D)return(0,c.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,c.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})});if(S)return(0,c.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,c.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:(0,c.jsx)("p",{children:S})})});if(!N)return(0,c.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,c.jsx)("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded",children:(0,c.jsx)("p",{children:"Venue not found"})})});var Q=function(e){switch(e.toLowerCase()){case"wifi":return(0,c.jsx)(v._0,{className:"mr-2"});case"parking":return(0,c.jsx)(v.mxg,{className:"mr-2"});case"accessibility":return(0,c.jsx)(v.Eys,{className:"mr-2"});case"catering":return(0,c.jsx)(v.yQ2,{className:"mr-2"});default:return null}};return(0,c.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,c.jsxs)("div",{className:"mb-6",children:[(0,c.jsx)(h(),{href:"/",className:"text-blue-600 hover:underline mb-4 inline-block",children:"← Back to venues"}),(0,c.jsx)("h1",{className:"text-3xl md:text-4xl font-bold mt-2",children:N.name}),(0,c.jsxs)("div",{className:"flex items-center mt-2 text-gray-600",children:[(0,c.jsx)(v.Nh4,{className:"mr-1"}),(0,c.jsx)("span",{children:N.location?"".concat(N.location.address,", ").concat(N.location.city,", ").concat(N.location.state,", ").concat(N.location.zipCode):"Location not specified"})]})]}),(0,c.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,c.jsxs)("div",{className:"lg:col-span-2",children:[(0,c.jsx)("div",{className:"relative rounded-lg overflow-hidden mb-6 bg-gray-100 h-96",children:N.images&&N.images.length>0?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("img",{src:N.images[E],alt:"".concat(N.name," - Image ").concat(E+1),className:"w-full h-full object-cover"}),N.images.length>1&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{onClick:function(){N&&N.images&&N.images.length>0&&M(function(e){return(e-1+N.images.length)%N.images.length})},className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-80 rounded-full p-2 shadow-md hover:bg-opacity-100 transition",children:"←"}),(0,c.jsx)("button",{onClick:function(){N&&N.images&&N.images.length>0&&M(function(e){return(e+1)%N.images.length})},className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-80 rounded-full p-2 shadow-md hover:bg-opacity-100 transition",children:"→"}),(0,c.jsx)("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center",children:N.images.map(function(e,s){return(0,c.jsx)("span",{className:"h-2 w-2 mx-1 rounded-full ".concat(s===E?"bg-white":"bg-white bg-opacity-50")},s)})})]})]}):(0,c.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,c.jsx)("p",{className:"text-gray-500",children:"No images available"})})}),(0,c.jsxs)("div",{className:"mb-8",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,c.jsxs)("div",{className:"flex items-center",children:[(0,c.jsx)(v.QJe,{className:"text-yellow-400 mr-1"}),(0,c.jsx)("span",{className:"font-semibold",children:N.averageRating?N.averageRating.toFixed(1):"New"}),(0,c.jsxs)("span",{className:"text-gray-600 ml-2",children:["(",N.reviews?N.reviews.length:0," reviews)"]})]}),(0,c.jsxs)("div",{className:"text-xl font-bold text-blue-600",children:["$",N.price?N.price.toFixed(2):"0.00","/day"]})]}),(0,c.jsx)("h2",{className:"text-2xl font-semibold mb-3",children:"About this venue"}),(0,c.jsx)("p",{className:"text-gray-700 mb-6",children:N.description}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,c.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,c.jsxs)("h3",{className:"font-semibold mb-2 flex items-center",children:[(0,c.jsx)(v.I$,{className:"mr-2"})," Capacity"]}),(0,c.jsxs)("p",{children:[N.capacity," people"]})]}),(0,c.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,c.jsx)("h3",{className:"font-semibold mb-2",children:"Venue Type"}),(0,c.jsx)("p",{children:N.type||"Not specified"})]})]}),N.amenities&&N.amenities.length>0&&(0,c.jsxs)("div",{className:"mb-6",children:[(0,c.jsx)("h3",{className:"text-xl font-semibold mb-3",children:"Amenities"}),(0,c.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:N.amenities.map(function(e,s){return(0,c.jsxs)("div",{className:"flex items-center",children:[Q(e),(0,c.jsx)("span",{children:e})]},s)})})]}),N.host&&(0,c.jsxs)("div",{className:"mb-6",children:[(0,c.jsx)("h3",{className:"text-xl font-semibold mb-3",children:"About the host"}),(0,c.jsxs)("div",{className:"flex items-center",children:[(0,c.jsx)("div",{className:"w-12 h-12 rounded-full bg-gray-300 mr-4 overflow-hidden",children:N.host.avatar?(0,c.jsx)("img",{src:N.host.avatar,alt:N.host.name,className:"w-full h-full object-cover"}):(0,c.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-blue-500 text-white font-bold text-lg",children:N.host.name.charAt(0).toUpperCase()})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"font-semibold",children:N.host.name}),(0,c.jsxs)("p",{className:"text-gray-600 text-sm",children:["Host since ",N.host.joinDate?(0,x.default)(new Date(N.host.joinDate),"MMMM yyyy"):"N/A"]})]})]})]}),(0,c.jsxs)("div",{className:"mb-6",children:[(0,c.jsx)("h3",{className:"text-xl font-semibold mb-3",children:"Reviews"}),N.reviews&&N.reviews.length>0?(0,c.jsx)("div",{className:"space-y-4",children:N.reviews.slice(0,3).map(function(e,s){return(0,c.jsxs)("div",{className:"border-b pb-4 last:border-b-0",children:[(0,c.jsxs)("div",{className:"flex items-center mb-2",children:[(0,c.jsx)("div",{className:"w-10 h-10 rounded-full bg-gray-300 mr-3 overflow-hidden",children:e.user&&e.user.avatar?(0,c.jsx)("img",{src:e.user.avatar,alt:e.user.name,className:"w-full h-full object-cover"}):(0,c.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-blue-500 text-white font-bold",children:e.user?e.user.name.charAt(0).toUpperCase():"U"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"font-semibold",children:e.user?e.user.name:"Anonymous"}),(0,c.jsx)("p",{className:"text-gray-600 text-sm",children:e.date?(0,x.default)(new Date(e.date),"MMMM d, yyyy"):"N/A"})]}),(0,c.jsxs)("div",{className:"ml-auto flex items-center",children:[(0,c.jsx)(v.QJe,{className:"text-yellow-400 mr-1"}),(0,c.jsx)("span",{children:e.rating})]})]}),(0,c.jsx)("p",{className:"text-gray-700",children:e.comment})]},s)})}):(0,c.jsx)("p",{className:"text-gray-600",children:"No reviews yet"}),N.reviews&&N.reviews.length>3&&(0,c.jsxs)("button",{className:"text-blue-600 hover:underline mt-4",children:["View all ",N.reviews.length," reviews"]})]})]})]}),(0,c.jsx)("div",{className:"lg:col-span-1",children:(0,c.jsxs)(p.E.div,{className:"bg-white rounded-lg shadow-lg p-6 sticky top-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,c.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Book this venue"}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"block text-gray-700 mb-2",children:"Select dates"}),(0,c.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsx)(v.Pll,{className:"absolute left-3 top-3 text-gray-400"}),(0,c.jsx)(g(),{selected:F.startDate,onChange:function(e){return T((0,n._)((0,l._)({},F),{startDate:e}))},selectsStart:!0,startDate:F.startDate,endDate:F.endDate,minDate:new Date,className:"w-full pl-10 p-2 border border-gray-300 rounded-md",placeholderText:"Start date"})]}),(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsx)(v.Pll,{className:"absolute left-3 top-3 text-gray-400"}),(0,c.jsx)(g(),{selected:F.endDate,onChange:function(e){return T((0,n._)((0,l._)({},F),{endDate:e}))},selectsEnd:!0,startDate:F.startDate,endDate:F.endDate,minDate:F.startDate,className:"w-full pl-10 p-2 border border-gray-300 rounded-md",placeholderText:"End date"})]})]})]}),(0,c.jsx)("button",{onClick:B,disabled:I,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md mb-4 transition duration-300 ease-in-out disabled:bg-blue-400",children:I?"Checking...":"Check Availability"}),null!==J&&(0,c.jsx)("div",{className:"p-3 rounded-md mb-4 ".concat(J?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:J?"This venue is available for the selected dates!":"This venue is not available for the selected dates. Please try different dates."}),(0,c.jsx)("button",{onClick:function(){if(!m){j.Am.info("Please login to book this venue"),s.push("/login",void 0,{shallow:!0});return}J?s.push({pathname:"/bookings/".concat(t),query:{startDate:F.startDate.toISOString(),endDate:F.endDate.toISOString(),venue:JSON.stringify(N)}}):j.Am.error("Please check availability before booking")},disabled:!J,className:"w-full bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-md transition duration-300 ease-in-out disabled:bg-gray-400",children:"Book Now"}),(0,c.jsxs)("div",{className:"mt-6 text-gray-600",children:[(0,c.jsx)("p",{className:"mb-2",children:"Price details:"}),(0,c.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,c.jsxs)("span",{children:["$",N.price?N.price.toFixed(2):"0.00"," x ",F.startDate&&F.endDate?Math.ceil((F.endDate-F.startDate)/864e5):0," days"]}),(0,c.jsxs)("span",{children:["$",N.price&&F.startDate&&F.endDate?(N.price*Math.ceil((F.endDate-F.startDate)/864e5)).toFixed(2):"0.00"]})]}),(0,c.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,c.jsx)("span",{children:"Service fee"}),(0,c.jsxs)("span",{children:["$",N.price&&F.startDate&&F.endDate?(N.price*Math.ceil((F.endDate-F.startDate)/864e5)*.1).toFixed(2):"0.00"]})]}),(0,c.jsxs)("div",{className:"border-t pt-2 mt-2 font-bold flex justify-between",children:[(0,c.jsx)("span",{children:"Total"}),(0,c.jsxs)("span",{children:["$",N.price&&F.startDate&&F.endDate?(N.price*Math.ceil((F.endDate-F.startDate)/864e5)*1.1).toFixed(2):"0.00"]})]})]})]})})]})]})}}},function(e){e.O(0,[445,949,298,198,774,888,179],function(){return e(e.s=2415)}),_N_E=e.O()}]);