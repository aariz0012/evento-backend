(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[495],{5511:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/register",function(){return r(474)}])},9489:function(e,s,r){"use strict";var a=r(1010),i=r(1309),t=r(7582),l=r(5893),n=r(7294),m=r(2175),o=r(6310),c=r(2920),d=r(6893),u=r(8120);s.Z=function(e){var s,r,x=e.email,b=e.mobileNumber,f=e.onVerified,p=e.onCancel,h=(0,i._)((0,n.useState)(!1),2),N=h[0],v=h[1],j=(0,i._)((0,n.useState)(!1),2),y=j[0],g=j[1],w=(0,u.aC)().verifyOTP,P=o.Ry().shape({emailOTP:o.Z_().matches(/^[0-9]{6}$/,"OTP must be 6 digits").required("Email OTP is required"),mobileOTP:o.Z_().matches(/^[0-9]{6}$/,"OTP must be 6 digits").required("Mobile OTP is required")}),O=(s=(0,a._)(function(e,s){var r,a,i,l,n,m,o;return(0,t.Jh)(this,function(t){switch(t.label){case 0:r=s.setSubmitting,a=s.setErrors,t.label=1;case 1:if(t.trys.push([1,6,7,8]),N)return[3,3];return[4,w({email:x,otp:e.emailOTP,type:"email"})];case 2:t.sent().success&&(v(!0),c.Am.success("Email verified successfully!")),t.label=3;case 3:if(y)return[3,5];return[4,w({email:x,otp:e.mobileOTP,type:"mobile"})];case 4:t.sent().success&&(g(!0),c.Am.success("Mobile number verified successfully!")),t.label=5;case 5:return N&&y&&f(),[3,8];case 6:return i=t.sent(),c.Am.error((null===(l=i.response)||void 0===l?void 0:null===(n=l.data)||void 0===n?void 0:n.error)||"Verification failed. Please try again."),a({submit:(null===(m=i.response)||void 0===m?void 0:null===(o=m.data)||void 0===o?void 0:o.error)||"Verification failed"}),[3,8];case 7:return r(!1),[7];case 8:return[2]}})}),function(e,r){return s.apply(this,arguments)}),T=(r=(0,a._)(function(e){return(0,t.Jh)(this,function(s){try{c.Am.info("New OTP sent to your ".concat("email"===e?"email":"mobile number"))}catch(s){c.Am.error("Failed to resend OTP to ".concat("email"===e?"email":"mobile number"))}return[2]})}),function(e){return r.apply(this,arguments)});return(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold text-center mb-6",children:"Verify Your Account"}),(0,l.jsx)("p",{className:"text-gray-600 mb-6 text-center",children:"We've sent verification codes to your email and mobile number. Please enter them below to complete your registration."}),(0,l.jsx)(m.J9,{initialValues:{emailOTP:"",mobileOTP:""},validationSchema:P,onSubmit:O,children:function(e){var s=e.isSubmitting,r=e.errors,a=e.touched;return(0,l.jsxs)(m.l0,{className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{htmlFor:"emailOTP",className:"form-label flex items-center",children:[(0,l.jsx)(d.Imn,{className:"mr-2"})," Email Verification Code",N&&(0,l.jsx)(d.UgA,{className:"ml-2 text-green-500"})]}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)(m.gN,{type:"text",name:"emailOTP",id:"emailOTP",disabled:N,className:"form-input ".concat(r.emailOTP&&a.emailOTP?"border-red-500":""," ").concat(N?"bg-gray-100":""),placeholder:"Enter 6-digit code"}),!N&&(0,l.jsx)("button",{type:"button",onClick:function(){return T("email")},className:"text-primary-600 hover:text-primary-700 text-sm font-medium",children:"Resend"})]}),(0,l.jsxs)("div",{className:"text-sm text-gray-500 mt-1",children:["Sent to: ",x.substring(0,3),"...",x.substring(x.indexOf("@"))]}),(0,l.jsx)(m.Bc,{name:"emailOTP",component:"div",className:"form-error"})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{htmlFor:"mobileOTP",className:"form-label flex items-center",children:[(0,l.jsx)(d.tUt,{className:"mr-2"})," Mobile Verification Code",y&&(0,l.jsx)(d.UgA,{className:"ml-2 text-green-500"})]}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)(m.gN,{type:"text",name:"mobileOTP",id:"mobileOTP",disabled:y,className:"form-input ".concat(r.mobileOTP&&a.mobileOTP?"border-red-500":""," ").concat(y?"bg-gray-100":""),placeholder:"Enter 6-digit code"}),!y&&(0,l.jsx)("button",{type:"button",onClick:function(){return T("mobile")},className:"text-primary-600 hover:text-primary-700 text-sm font-medium",children:"Resend"})]}),(0,l.jsxs)("div",{className:"text-sm text-gray-500 mt-1",children:["Sent to: ",b.substring(0,2),"XXXXX",b.substring(7)]}),(0,l.jsx)(m.Bc,{name:"mobileOTP",component:"div",className:"form-error"})]}),r.submit&&(0,l.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded",children:r.submit}),(0,l.jsxs)("div",{className:"flex space-x-4",children:[(0,l.jsx)("button",{type:"button",onClick:p,className:"w-1/2 btn-outline py-3",children:"Back"}),(0,l.jsx)("button",{type:"submit",disabled:s||N&&y,className:"w-1/2 btn-primary py-3",children:s?"Verifying...":N&&y?"Verified":"Verify"})]})]})}})]})}},474:function(e,s,r){"use strict";r.r(s);var a=r(1010),i=r(1309),t=r(7582),l=r(5893),n=r(7294),m=r(1163),o=r(1664),c=r.n(o),d=r(2175),u=r(6310),x=r(2920),b=r(6893),f=r(8120),p=r(2490),h=r(9489);s.default=function(){var e,s=(0,i._)((0,n.useState)(!1),2),r=s[0],o=s[1],N=(0,i._)((0,n.useState)(""),2),v=N[0],j=N[1],y=(0,i._)((0,n.useState)(""),2),g=y[0],w=y[1],P=(0,f.aC)().registerUser,O=(0,m.useRouter)(),T=u.Ry().shape({fullName:u.Z_().min(3,"Name must be at least 3 characters").required("Full name is required"),email:u.Z_().email("Invalid email address").required("Email is required"),mobileNumber:u.Z_().matches(/^[0-9]{10}$/,"Mobile number must be 10 digits").required("Mobile number is required"),password:u.Z_().min(6,"Password must be at least 6 characters").required("Password is required"),confirmPassword:u.Z_().oneOf([u.iH("password"),null],"Passwords must match").required("Confirm password is required"),address:u.Z_().required("Address is required"),termsAccepted:u.O7().oneOf([!0],"You must accept the terms and conditions")}),_=(e=(0,a._)(function(e,s){var r,a,i,l,n,m,c;return(0,t.Jh)(this,function(t){switch(t.label){case 0:r=s.setSubmitting,a=s.setErrors,t.label=1;case 1:return t.trys.push([1,3,4,5]),[4,P({fullName:e.fullName,email:e.email,mobileNumber:e.mobileNumber,password:e.password,address:e.address})];case 2:return t.sent().success&&(j(e.email),w(e.mobileNumber),o(!0),x.Am.success("Registration successful! Please verify your email and mobile.")),[3,5];case 3:return i=t.sent(),x.Am.error((null===(l=i.response)||void 0===l?void 0:null===(n=l.data)||void 0===n?void 0:n.error)||"Registration failed. Please try again."),a({submit:(null===(m=i.response)||void 0===m?void 0:null===(c=m.data)||void 0===c?void 0:c.error)||"Registration failed"}),[3,5];case 4:return r(!1),[7];case 5:return[2]}})}),function(s,r){return e.apply(this,arguments)});return(0,l.jsx)(p.Z,{title:"Register - EventO",children:(0,l.jsx)("div",{className:"bg-gray-50 min-h-screen py-12",children:(0,l.jsxs)("div",{className:"max-w-md mx-auto bg-white rounded-lg shadow-md overflow-hidden",children:[(0,l.jsx)("div",{className:"bg-gradient-to-r from-primary-600 to-secondary-600 py-4 px-6",children:(0,l.jsx)("h1",{className:"text-2xl font-bold text-white text-center",children:"Create an Account"})}),r?(0,l.jsx)(h.Z,{email:v,mobileNumber:g,onVerified:function(){x.Am.success("Verification successful!"),O.push("/login")},onCancel:function(){return o(!1)}}):(0,l.jsx)("div",{className:"p-6",children:(0,l.jsx)(d.J9,{initialValues:{fullName:"",email:"",mobileNumber:"",password:"",confirmPassword:"",address:"",termsAccepted:!1},validationSchema:T,onSubmit:_,children:function(e){var s=e.isSubmitting,r=e.errors,a=e.touched;return(0,l.jsxs)(d.l0,{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"fullName",className:"form-label",children:"Full Name"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,l.jsx)(b.fzv,{className:"text-gray-400"})}),(0,l.jsx)(d.gN,{type:"text",name:"fullName",id:"fullName",className:"form-input pl-10 ".concat(r.fullName&&a.fullName?"border-red-500":""),placeholder:"Enter your full name"})]}),(0,l.jsx)(d.Bc,{name:"fullName",component:"div",className:"form-error"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,l.jsx)(b.Imn,{className:"text-gray-400"})}),(0,l.jsx)(d.gN,{type:"email",name:"email",id:"email",className:"form-input pl-10 ".concat(r.email&&a.email?"border-red-500":""),placeholder:"Enter your email"})]}),(0,l.jsx)(d.Bc,{name:"email",component:"div",className:"form-error"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"mobileNumber",className:"form-label",children:"Mobile Number"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,l.jsx)(b.tUt,{className:"text-gray-400"})}),(0,l.jsx)(d.gN,{type:"text",name:"mobileNumber",id:"mobileNumber",className:"form-input pl-10 ".concat(r.mobileNumber&&a.mobileNumber?"border-red-500":""),placeholder:"Enter your mobile number"})]}),(0,l.jsx)(d.Bc,{name:"mobileNumber",component:"div",className:"form-error"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"password",className:"form-label",children:"Password"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,l.jsx)(b.UIZ,{className:"text-gray-400"})}),(0,l.jsx)(d.gN,{type:"password",name:"password",id:"password",className:"form-input pl-10 ".concat(r.password&&a.password?"border-red-500":""),placeholder:"Create a password"})]}),(0,l.jsx)(d.Bc,{name:"password",component:"div",className:"form-error"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"confirmPassword",className:"form-label",children:"Confirm Password"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,l.jsx)(b.UIZ,{className:"text-gray-400"})}),(0,l.jsx)(d.gN,{type:"password",name:"confirmPassword",id:"confirmPassword",className:"form-input pl-10 ".concat(r.confirmPassword&&a.confirmPassword?"border-red-500":""),placeholder:"Confirm your password"})]}),(0,l.jsx)(d.Bc,{name:"confirmPassword",component:"div",className:"form-error"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"address",className:"form-label",children:"Address"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,l.jsx)(b.i63,{className:"text-gray-400"})}),(0,l.jsx)(d.gN,{as:"textarea",name:"address",id:"address",rows:"3",className:"form-input pl-10 ".concat(r.address&&a.address?"border-red-500":""),placeholder:"Enter your address"})]}),(0,l.jsx)(d.Bc,{name:"address",component:"div",className:"form-error"})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"flex items-center",children:[(0,l.jsx)(d.gN,{type:"checkbox",name:"termsAccepted",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,l.jsxs)("span",{className:"ml-2 text-sm text-gray-600",children:["I agree to the"," ",(0,l.jsx)(c(),{href:"/terms",className:"text-primary-600 hover:text-primary-500",children:"Terms of Service"})," ","and"," ",(0,l.jsx)(c(),{href:"/privacy",className:"text-primary-600 hover:text-primary-500",children:"Privacy Policy"})]})]}),(0,l.jsx)(d.Bc,{name:"termsAccepted",component:"div",className:"form-error"})]}),r.submit&&(0,l.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded",children:r.submit}),(0,l.jsx)("div",{children:(0,l.jsx)("button",{type:"submit",disabled:s,className:"w-full btn-primary py-3 flex justify-center",children:s?"Registering...":"Register"})}),(0,l.jsx)("div",{className:"text-center mt-4",children:(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",(0,l.jsx)(c(),{href:"/login",className:"text-primary-600 hover:text-primary-500 font-medium",children:"Log In"})]})})]})}})})]})})})}}},function(e){e.O(0,[949,855,743,490,774,888,179],function(){return e(e.s=5511)}),_N_E=e.O()}]);